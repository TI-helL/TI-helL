# HTTP Method - PUT vs PATCH

- HTTP 메소드 중 PUT과 PATCH의 차이점에 대한 간략 정리
- PUT, PATCH는 모두 리소스를 업데이트 하는 HTTP 메소드다

<br>

## PUT 메소드

- 리소스 전체를 수정하는 메소드
- 클라이언트가 리소스 전체 필드를 전달해야 함
  - 클라이언트에서 리소스 전체에 대한 데이터가 아닌 일부만 전달받으면 전달된 필드 외에는 모두 null 혹은 초기값으로 처리됨
- 요청받은 URL에 해당하는 리소스가 존재하지 않는 경우 새로 생성함
- 멱등성(idempotent) 보장 -> 여러 번 수행해도 처음 실행한 것과 같은 결과

<br>

## PATCH 메소드

- 리소스의 일부분을 수정하는 메소드
- 클라이언트에서 일부 필드만을 전달
- API 구현 방법에 따라 멱등성을 보장할 수도 있고 못할수도 있음
  - 멱등성 보장되는 경우
  
    ```json
    // 기존 리소스
    {
        id: 1,
        name: 'evan',
        age: 30,
    }
    ```

    ```json
    PATCH users/1
    { age: 31 }
    ```

    ```json
    // 수정된 리소스
    {
      id: 1,
      name: 'evan',
      age: 31, // 변경됨
    }
    ```

  <br>

  - 멱등성이 보장되지 않은 경우 (이렇게 구현해야하는 경우가 있을지는 모르겠다..)
    - $increase 필드의 값은 증가시키고 싶은 속성
    - value 필드의 값은 해당 속성을 얼마나 증가시킬 것인지를 의미함
    - API가 호출될 때마다 나이가 1씩 증가하기 때문에 멱등성을 보장하지 않음 (결과 상태가 호출될 때마다 다름) 

    ```json
    PATCH users/1
    {
      $increase: 'age',
      value: 1,
    }
    ```
