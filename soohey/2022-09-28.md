# 도커

### 도커 이미지
가상 머신에서 사용하는 이미지와 비슷하 ㄴ여할
어떤 애플리케이션을 실행하기 위한 환경
환경 : 파일들의 집합
도커에선 애플리케이션을 실행하기 위한 파일을 모아두고, 애플리케이션과 함게 이미지로 만듬. 그리고 이미지를 기반으로 애플리케이션을 바로 배포할 수 있음

### 컨테이너 - 격리된 환경에서 실행되는 프로세스

도커 레지스트리에서 centos 이미지지를 풀받아 로컬로 다운로드받기
이미지를 통해 컨테이너 실행

### 컨테이너 종류
System container : 여러 프로세스를 격리. 각각의 컨테이너마다 시스템 독립적으로 제공. 기존의 컨테이너 방식
Application container : main 서비스가 하나있고 격리. 호스트마다 시스템 공유, 시스템컨테이너보다 더 경량화된 방식. MSA


### 일반적인 시스템 개발 흐름
개발환경 -> 테스트 환경 -> 스테이징 환경 -> 제품환경
환경이 여러개라 다 같은 상태로 업데이트하려고 해도 문제 예측이 쉽지가 않음
아주 작은 차이라도 다른 결과가 나올 확률이 높음 -> 애자일 선택하기

### 도커를 활용한 시스템 개발 흐름
도커의 컨테이너 기술 => 서버 가상화 기술
메인 서비스를 해당 호스트에 전용으로 설치해서 사용
애플리케이션 파일 set과 os에서 필요한 파일 set을 이미지로 만들어버리고 컨테이너에 올려 배포함. 이미지만 있어도 세팅이 가능해짐
어떤 하드웨어/버전이던 도커엔진만 설치되어있다면 필요한 이미지(파일 set) 다운받아서 사용가능

### 도커의 기본 3가지 기능
1. Build
도커의 이미지를 만드는 기능
애플리케이션의 실행에 필요한 프로그램 본체, 라이브러리, 미들웨어, os나 네트워크 설정등을 하나로 모아 Docker 이미지로 생성
하나의 이미지에 하나의 애플리케이션만 넣어두기
여러개의 컨테이너를 조합하여 서비스를 구축함
2. Ship
도커의 이미지를 공유함
도커 공식 레지스트리는 Docker Hub
도커허브는 리눅스 배포판이 기본 기능을 제공하는 베이스 이미지를 배포
공식 이미지 외의 개인이 작성한 것들도 Docker Hub에 공개 및 공유 가능
3. Run
Docker 컨테이너를 작동시키는 기능
Scale out 방식을 사용 -> 같은 기능을 복제해서 사용하는 방식
하나의 동일한 이미지를 여러개의 컨테이너에 올릴 수 있음

### 도커 에디션
Docker 릴리즈 : 도커는 에디션에 따라 정기적으로 릴리즈가 발생
Stable : 매번 릴리즈되는 것이 아니라 안정적인 것을 원할 때 사용
Edge : 매번 릴리즈되는 최신판
Moby Project : 안정화를 위해 1년 이상 거치는 오픈소스 프로젝트

### 도커 컴포넌트
Docker Engine : 도커의 핵심기능 (도커 데몬)
Docker Registry : 이미지 공개 및 공유
Docker Compose : 컨테이너 일원 관리 (여러개의 컨테이너 배포를 위함)
Docker Machine : 도커 실행 환경 구축 (여러대의 호스트 제어)
Docker Swarm : 클러스터 관리 (여러개의 도커 host를 묶어 관리함. 쿠버네티스로 대체 가능)


### Docker search cents
Docker hub로부터 사용가능한 이미지 찾기
Docker는 Docker Hub을 통해 
